name: CI

on:
    pull_request:
    push:
        branches: [master]

jobs:
    cs:
        name: 'Code Style'
        runs-on: ubuntu-latest

        steps:
          - name: Checkout code
            uses: actions/checkout@v2

          - name: Setup PHP
            uses: shivammathur/setup-php@v2
            with:
              php-version: 8.1
              coverage: none
              tools: php-cs-fixer:3.34, cs2pr

          - name: Display PHP-CS-Fixer version
            run: php-cs-fixer --version

          - name: PHP-CS-Fixer
            run: php-cs-fixer fix --dry-run --format=checkstyle | cs2pr
